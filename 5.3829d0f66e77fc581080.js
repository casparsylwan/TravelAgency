(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{blj4:function(t,n,e){"use strict";e.r(n),e.d(n,"MypagesModule",function(){return x});var r=e("ofXK"),o=e("3Pt+"),i=e("tyNb"),c=e("fXoL"),b=e("hj3O"),a=e("h5Rr");function s(t,n){if(1&t){const t=c.Nb();c.Mb(0,"tr"),c.Mb(1,"td"),c.gc(2),c.Lb(),c.Mb(3,"td"),c.gc(4),c.Lb(),c.Mb(5,"td"),c.gc(6),c.Lb(),c.Mb(7,"td",25),c.Tb("click",function(){c.cc(t);const e=n.$implicit;return c.Xb().setDepartureAirport(e)}),c.gc(8,"Add"),c.Lb(),c.Mb(9,"td",25),c.Tb("click",function(){c.cc(t);const e=n.$implicit;return c.Xb().setArrivalAirport(e)}),c.gc(10,"Add"),c.Lb(),c.Lb()}if(2&t){const t=n.$implicit;c.wb(2),c.hc(t.name),c.wb(2),c.hc(t.country),c.wb(2),c.ic(" ",t.city,"")}}let g=(()=>{class t{constructor(t,n,e){this.fb=t,this.travelService=n,this.state=e,this.customer$=null,this.airports$=[],this.departureAirport={name:"",country:"",city:""},this.arrivalAirport={name:"",country:"",city:""},this.departureDate=Date.now(),this.arrivalDate=Date.now(),this.airportForm=this.fb.group({airportName:[""],country:[""],city:[""]})}ngOnInit(){this.state.customer$.subscribe(t=>this.customer$=t),this.state.airports$.subscribe(t=>this.airports$=t)}createAirport(){var t;if(null!=this.customer$){const n={name:this.airportForm.value.airportName,country:this.airportForm.value.country,city:this.airportForm.value.city};(null===(t=this.customer$)||void 0===t?void 0:t.jwt.length)>5&&this.travelService.newAirport(n,this.customer$.jwt).subscribe(t=>{this.state.addAirport(t),this.airportForm.reset()})}}setDepartureAirport(t){this.departureAirport=t}setArrivalAirport(t){this.arrivalAirport=t}resetTravelAirports(){this.departureAirport={name:"",country:"",city:""},this.arrivalAirport={name:"",country:"",city:""}}registerTravel(){console.log({fromAirport:this.departureAirport,toAirport:this.arrivalAirport,depatureDate:this.departureDate,returnDate:this.arrivalDate})}}return t.\u0275fac=function(n){return new(n||t)(c.Hb(o.b),c.Hb(b.a),c.Hb(a.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-setup-destination"]],decls:95,vars:10,consts:[[1,"container-destinations"],[1,"box-destinations"],[1,"travel-h3"],[3,"formGroup"],[1,"input-box"],["for","name"],["id","name","name","name","type","text","formControlName","airportName","placeholder","Airport"],["for","country"],["id","country","name","country","type","text","formControlName","country","placeholder","country"],["for","city"],["id","city","name","city","type","text","formControlName","city","placeholder","city"],[1,"btn-new",3,"click"],[4,"ngFor","ngForOf"],[1,"radio-row"],[1,"input-box","radio"],["type","radio","id","oneway","name","oneway","value","oneway"],["for","oneway"],["type","radio","id","return","name","oneway","value","return"],["for","return"],[1,"airport-travel"],[1,"from"],[1,"airportname"],["type","date",3,"value"],[1,"to"],["type","number"],[3,"click"]],template:function(t,n){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"h3",2),c.gc(3,"Register an airport"),c.Lb(),c.Mb(4,"form",3),c.Mb(5,"div",4),c.Mb(6,"label",5),c.gc(7,"Airport Name"),c.Lb(),c.Ib(8,"input",6),c.Lb(),c.Mb(9,"div",4),c.Mb(10,"label",7),c.gc(11,"Country"),c.Lb(),c.Ib(12,"input",8),c.Lb(),c.Mb(13,"div",4),c.Mb(14,"label",9),c.gc(15,"City"),c.Lb(),c.Ib(16,"input",10),c.Lb(),c.Lb(),c.Mb(17,"button",11),c.Tb("click",function(){return n.createAirport()}),c.gc(18,"SEND"),c.Lb(),c.Lb(),c.Mb(19,"div",1),c.Mb(20,"table"),c.Mb(21,"thead"),c.Mb(22,"tr"),c.Mb(23,"th"),c.gc(24,"Airport"),c.Lb(),c.Mb(25,"th"),c.gc(26,"Country"),c.Lb(),c.Mb(27,"th"),c.gc(28,"City"),c.Lb(),c.Mb(29,"th"),c.gc(30,"From"),c.Lb(),c.Mb(31,"th"),c.gc(32,"To"),c.Lb(),c.Lb(),c.Lb(),c.Mb(33,"tbody"),c.fc(34,s,11,3,"tr",12),c.Lb(),c.Lb(),c.Lb(),c.Mb(35,"div",1),c.Mb(36,"h3",2),c.gc(37,"Create an offer"),c.Lb(),c.Mb(38,"div",13),c.Mb(39,"div",14),c.Ib(40,"input",15),c.Mb(41,"label",16),c.gc(42,"One way"),c.Lb(),c.Lb(),c.Mb(43,"div",14),c.Ib(44,"input",17),c.Mb(45,"label",18),c.gc(46,"Return"),c.Lb(),c.Ib(47,"br"),c.Lb(),c.Lb(),c.Mb(48,"div",19),c.Mb(49,"div",20),c.Mb(50,"div",4),c.Mb(51,"h3"),c.gc(52," Departure Airport "),c.Lb(),c.Mb(53,"div",21),c.gc(54),c.Lb(),c.Lb(),c.Mb(55,"div",4),c.Mb(56,"h3"),c.gc(57," From City "),c.Lb(),c.Mb(58,"div",21),c.gc(59),c.Lb(),c.Lb(),c.Mb(60,"div",4),c.Mb(61,"h3"),c.gc(62," In Country "),c.Lb(),c.Mb(63,"div",21),c.gc(64),c.Lb(),c.Lb(),c.Mb(65,"div",4),c.Mb(66,"h3"),c.gc(67," Departure date "),c.Lb(),c.Ib(68,"input",22),c.Lb(),c.Lb(),c.Mb(69,"div",23),c.Mb(70,"div",4),c.Mb(71,"h3"),c.gc(72," Arrival Airport "),c.Lb(),c.Mb(73,"div",21),c.gc(74),c.Lb(),c.Lb(),c.Mb(75,"div",4),c.Mb(76,"h3"),c.gc(77," From City "),c.Lb(),c.Mb(78,"div",21),c.gc(79),c.Lb(),c.Lb(),c.Mb(80,"div",4),c.Mb(81,"h3"),c.gc(82," In Country "),c.Lb(),c.Mb(83,"div",21),c.gc(84),c.Lb(),c.Lb(),c.Mb(85,"div",4),c.Mb(86,"h3"),c.gc(87," Return date "),c.Lb(),c.Ib(88,"input",22),c.Lb(),c.Mb(89,"div",4),c.Mb(90,"h3"),c.gc(91," Price "),c.Lb(),c.Ib(92,"input",24),c.Lb(),c.Mb(93,"button",11),c.Tb("click",function(){return n.registerTravel()}),c.gc(94,"Register"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.wb(4),c.Yb("formGroup",n.airportForm),c.wb(30),c.Yb("ngForOf",n.airports$),c.wb(20),c.ic(" ",n.departureAirport.name," "),c.wb(5),c.ic(" ",n.departureAirport.city," "),c.wb(5),c.ic(" ",n.departureAirport.country," "),c.wb(4),c.Yb("value",n.departureDate),c.wb(6),c.ic(" ",n.arrivalAirport.name," "),c.wb(5),c.ic(" ",n.arrivalAirport.city," "),c.wb(5),c.ic(" ",n.arrivalAirport.country," "),c.wb(4),c.Yb("value",n.arrivalDate))},directives:[o.i,o.g,o.d,o.a,o.f,o.c,r.h],styles:[".container-destinations[_ngcontent-%COMP%]{margin:2rem 0 0;display:flex}.container-destinations[_ngcontent-%COMP%]   .box-destinations[_ngcontent-%COMP%]{padding:0 2rem}.container-destinations[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:column}.container-destinations[_ngcontent-%COMP%]   .input-box.radio[_ngcontent-%COMP%]{flex-direction:row;justify-content:start;padding-right:3rem}.container-destinations[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.3rem}.radio-row[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.btn-new[_ngcontent-%COMP%]{width:100%;margin:2rem 0 1rem;padding:.5rem;border:none;border-radius:5px;background-color:#00e;font-weight:700;font-size:1.2rem;color:#fff}table[_ngcontent-%COMP%]{background:#fff;border-radius:6px;width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem 1rem 1rem}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:3rem;background:#00e;color:#fff;font-size:1.2rem;font-weight:lighter;text-align:center}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:1px solid #e3f1d5}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#bbb}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border:0}.box-destinations[_ngcontent-%COMP%]   .travel-h3[_ngcontent-%COMP%]{text-align:center;font-weight:bolder;font-size:1.2rem}.airport-travel[_ngcontent-%COMP%]{display:flex}.airport-travel[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .airport-travel[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{margin:1rem}.airport-travel[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%], .airport-travel[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{height:3rem;justify-content:space-between}.airport-travel[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .airport-travel[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700}.airport-travel[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%]   .airportname[_ngcontent-%COMP%], .airport-travel[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]   .airportname[_ngcontent-%COMP%]{border-bottom:1px solid #000}"]}),t})();var l=e("7HOx");function d(t,n){if(1&t&&(c.Kb(0),c.Mb(1,"td"),c.gc(2),c.Lb(),c.Mb(3,"td"),c.gc(4),c.Lb(),c.Mb(5,"td"),c.gc(6),c.Lb(),c.Mb(7,"td"),c.gc(8),c.Lb(),c.Mb(9,"td"),c.gc(10),c.Lb(),c.Mb(11,"td"),c.gc(12),c.Lb(),c.Mb(13,"td"),c.gc(14),c.Lb(),c.Mb(15,"td"),c.gc(16),c.Lb(),c.Mb(17,"td"),c.gc(18,"Add"),c.Lb(),c.Jb()),2&t){const t=c.Xb().$implicit,n=c.Xb();c.wb(2),c.hc(t.fromAirport.name),c.wb(2),c.hc(t.fromAirport.country),c.wb(2),c.ic(" ",t.fromAirport.city,""),c.wb(2),c.hc(t.toAirport.name),c.wb(2),c.hc(t.toAirport.country),c.wb(2),c.ic(" ",t.toAirport.city,""),c.wb(2),c.ic(" ",n.createDate(t.depatureDate),""),c.wb(2),c.ic("",t.price," kr ")}}function u(t,n){if(1&t&&(c.Mb(0,"tr"),c.fc(1,d,19,8,"ng-container",2),c.Lb()),2&t){const t=n.$implicit;c.wb(1),c.Yb("ngIf",null!=t.fromAirport&&null!=t.toAirport)}}let M=(()=>{class t{constructor(t,n,e){this.travelService=t,this.state=n,this.router=e,this.customer$=null,this.offers=[],this.offersCall=!1}ngOnInit(){this.state.customer$.subscribe(t=>{this.customer$=t,!this.offersCall&&this.customer$.jwt.length>6&&(this.offersCall=!0,this.getOffers(),console.log("SENT: ",t))})}getOffers(){var t,n;console.log("get offers ",null===(t=this.customer$)||void 0===t?void 0:t.jwt),(null===(n=this.customer$)||void 0===n?void 0:n.jwt)&&this.travelService.getAllTravelOffers(this.customer$.jwt).subscribe(t=>{this.offers=[...this.offers,...t],console.log(this.offers)},t=>{console.log(t),this.logout()})}logout(){const t=new l.a("");this.state.setCustomer(t),sessionStorage.removeItem("travelux"),this.router.navigate(["/login"])}createDate(t){if(null==t)return null;let n=new Date(t);return n.getFullYear()+"-"+this.pad(n.getMonth()+1,2)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()}pad(t,n){let e=Math.floor(n),r=""+t,o=r.length;return o>=e?r:"0".repeat(e-o)+r}}return t.\u0275fac=function(n){return new(n||t)(c.Hb(b.a),c.Hb(a.a),c.Hb(i.b))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-mypage-offer"]],decls:30,vars:1,consts:[["colspan","3"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,n){1&t&&(c.Mb(0,"table"),c.Mb(1,"thead"),c.Mb(2,"tr"),c.Mb(3,"th",0),c.gc(4,"Travling from"),c.Lb(),c.Mb(5,"th",0),c.gc(6,"Travling to"),c.Lb(),c.Mb(7,"th",0),c.gc(8,"Your price"),c.Lb(),c.Lb(),c.Mb(9,"tr"),c.Mb(10,"th"),c.gc(11,"Airport"),c.Lb(),c.Mb(12,"th"),c.gc(13,"Country"),c.Lb(),c.Mb(14,"th"),c.gc(15,"City"),c.Lb(),c.Mb(16,"th"),c.gc(17,"Airport"),c.Lb(),c.Mb(18,"th"),c.gc(19,"Country"),c.Lb(),c.Mb(20,"th"),c.gc(21,"City"),c.Lb(),c.Mb(22,"th"),c.gc(23,"Date"),c.Lb(),c.Mb(24,"th"),c.gc(25,"price"),c.Lb(),c.Mb(26,"th"),c.gc(27,"Buy"),c.Lb(),c.Lb(),c.Lb(),c.Mb(28,"tbody"),c.fc(29,u,2,1,"tr",1),c.Lb(),c.Lb()),2&t&&(c.wb(29),c.Yb("ngForOf",n.offers))},directives:[r.h,r.i],styles:["table[_ngcontent-%COMP%]{background:#fff;border-radius:6px;width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem 1rem 1rem}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:3rem;background:#00e;color:#fff;font-size:1.2rem;font-weight:lighter;text-align:center}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-left:1px solid #000}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2)   th[_ngcontent-%COMP%]:nth-child(3n){border-right:1px solid #000}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:1px solid #e3f1d5}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#bbb}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border:0}"]}),t})();function p(t,n){1&t&&(c.Mb(0,"h2",6),c.gc(1,"Admin board"),c.Lb())}function f(t,n){if(1&t&&(c.Mb(0,"h2",6),c.gc(1),c.Lb()),2&t){const t=c.Xb();c.wb(1),c.ic(" Welcome ",t.customer$.firstName,"")}}function h(t,n){1&t&&(c.Mb(0,"li",7),c.Mb(1,"a"),c.gc(2," Create trip "),c.Lb(),c.Lb())}function m(t,n){1&t&&(c.Mb(0,"li",7),c.Mb(1,"a"),c.gc(2," Customers "),c.Lb(),c.Lb())}function C(t,n){1&t&&(c.Mb(0,"li",7),c.Mb(1,"a"),c.gc(2," View travelorders "),c.Lb(),c.Lb())}const O=function(){return["/booking/date"]};function L(t,n){1&t&&(c.Mb(0,"li",7),c.Mb(1,"a",8),c.gc(2," Buy a flight "),c.Lb(),c.Lb()),2&t&&(c.wb(1),c.Yb("routerLink",c.Zb(1,O)))}const v=function(){return["/mypage/orders"]};function P(t,n){1&t&&(c.Mb(0,"li",7),c.Mb(1,"a",8),c.gc(2," My orders "),c.Lb(),c.Lb()),2&t&&(c.wb(1),c.Yb("routerLink",c.Zb(1,v)))}function _(t,n){1&t&&c.Ib(0,"app-setup-destination")}function y(t,n){1&t&&c.Ib(0,"app-mypage-offer")}let w=(()=>{class t{constructor(t,n){this.ts=t,this.state=n,this.headingsAdmin="New travel destination",this.customer$=null}ngOnInit(){this.state.customer$.subscribe(t=>this.customer$=t)}}return t.\u0275fac=function(n){return new(n||t)(c.Hb(b.a),c.Hb(a.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-mypages"]],decls:17,vars:10,consts:[[1,"admin-pages"],[1,"sidebar"],["class","adminboard",4,"ngIf"],["class","nav-view",4,"ngIf"],[1,"heading"],[4,"ngIf"],[1,"adminboard"],[1,"nav-view"],[3,"routerLink"]],template:function(t,n){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.fc(2,p,2,0,"h2",2),c.fc(3,f,2,1,"h2",2),c.Mb(4,"ul"),c.fc(5,h,3,0,"li",3),c.fc(6,m,3,0,"li",3),c.fc(7,C,3,0,"li",3),c.fc(8,L,3,2,"li",3),c.fc(9,P,3,2,"li",3),c.Lb(),c.Lb(),c.Mb(10,"section",4),c.Mb(11,"h2"),c.gc(12),c.Lb(),c.Mb(13,"h3"),c.gc(14,"Setup destinations"),c.Lb(),c.fc(15,_,1,0,"app-setup-destination",5),c.fc(16,y,1,0,"app-mypage-offer",5),c.Lb(),c.Lb()),2&t&&(c.wb(2),c.Yb("ngIf",null!=n.customer$&&"ADMIN"==n.customer$.roles),c.wb(1),c.Yb("ngIf",null!=n.customer$&&"CUSTOMER"==n.customer$.roles),c.wb(2),c.Yb("ngIf",null!=n.customer$&&"ADMIN"==n.customer$.roles),c.wb(1),c.Yb("ngIf",null!=n.customer$&&"ADMIN"==n.customer$.roles),c.wb(1),c.Yb("ngIf",null!=n.customer$&&"ADMIN"==n.customer$.roles),c.wb(1),c.Yb("ngIf",null!=n.customer$&&"CUSTOMER"==n.customer$.roles),c.wb(1),c.Yb("ngIf",null!=n.customer$&&"CUSTOMER"==n.customer$.roles),c.wb(3),c.hc(n.headingsAdmin),c.wb(3),c.Yb("ngIf",null!=n.customer$&&"ADMIN"==n.customer$.roles),c.wb(1),c.Yb("ngIf",null!=n.customer$&&"CUSTOMER"==n.customer$.roles))},directives:[r.i,i.c,g,M],styles:[".admin-pages[_ngcontent-%COMP%]{display:flex;background-color:#eee}.admin-pages[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]{min-height:calc(100vh - 4rem)}.sidebar[_ngcontent-%COMP%]{width:20rem;background-color:#4e73df}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-top:4rem;margin-bottom:2rem;text-align:center;font-size:1.5rem;font-weight:700}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:4rem;display:flex;justify-content:center;align-items:center;color:#fff;border-bottom:1px solid #fff}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#4e73ff}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:2rem;letter-spacing:3px;font-size:large;height:100%}.heading[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.heading[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start}.heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:2rem;font-size:2rem;letter-spacing:2px}"]}),t})();const A=[{path:"",component:w},{path:":view",component:w}];let $=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(n){return new(n||t)},imports:[[i.d.forChild(A)],i.d]}),t})(),x=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(n){return new(n||t)},imports:[[r.b,$,o.e,o.h]]}),t})()}}]);